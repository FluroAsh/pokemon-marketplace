<!-- encapsulates card_details & table element -->
<div class="trading-card d-flex flex-column align-items-center pt-3">
    <!-- partial for card details element -->
    <%= render "card_details" %>
    <!-- >>> loop through all (already set for the show method -- params passed by url) <<< -->
    <!-- listings table -->
    <section class="listing-table listing-table--mobile mb-3">
        <table class="table table-striped m-0">
            <thead class="thead-dark">
                <tr>
                    <th scope="col-sm">Seller Name</th>
                    <th scope="col-sm">Price</th>
                    <th scope="col-sm">Condition</th>
                    <th scope="col-sm">Action</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <!-- dummy row -->
                    <td class="d-flex flex-row justify-content-between" scope="col-sm">Seller Name</td>
                    <td scope="col-sm">Price</td>
                    <td scope="col-sm">Condition</td>
                    <td class="d-flex justify-content-around" scope="col-sm">
                        <%= button_to "Buy", card_path(@card.id), class: "btn btn-primary mr-1" %>
                        <%= button_to "View", card_path(@card.id), class: "btn btn-success" %>
                    </td>
                </tr>
            </tbody>
        </table>
    </section>

    <!-- large device table -->
    <section class="listing-table listing-table--large mb-3">
        <% if @listings %>
            <table class="table m-0">
                <thead class="thead-dark">
                    <tr>
                        <th scope="col-sm">Seller Name</th>
                        <th scope="col-sm">Price</th>
                        <th scope="col-sm">Description</th>
                        <th scope="col-sm">Condition</th>
                        <th scope="col-sm">Action</th>
                    </tr>
                </thead>
                <tbody>
                    <% @listings.each do |listing| %>
                        <tr>
                            <td scope="col-sm" class="d-flex justify-content-between"><%= "#{listing.user.profile.first_name} #{listing.user.profile.last_name}" %><%= image_tag listing.user.avatar, style: "margin-left:0.5rem;border-radius:5px;", size: "65x65", alt: "profile-avatar" if listing.user.avatar.attached? %></td>
                            <td scope="col-sm" style="width:100px;"><%= format_price(listing.price) %></td>
                            <td scope="col-sm"><%= listing.description %></td>
                            <td scope="col-sm" style="width:120px;"><%= condition_name(listing.condition) %></td>
                            <td class="d-flex justify-content-around" scope="col-sm">
                                <%= button_to "Buy", card_path(@card.id), class: "btn btn-primary ml-1" if current_user %>
                                <%= button_to "View", card_path(@card.id), class: "btn btn-success" %>
                            </td>
                        </tr>
                    <% end %>
                </tbody>
            </table>
        <% elsif @listings.empty? %> <!-- fix so we create empty row/div if there's no listings -->
            <% p ">>>>>>>> #{@listings.empty?}" %>
            <table class="table m-0">
                <thead class="dark">
                    <tr>
                        <th scope="col-sm">Seller Name</th>
                        <th scope="col-sm">Price</th>
                        <th scope="col-sm">Description</th>
                        <th scope="col-sm">Condition</th>
                        <th scope="col-sm">Action</th>
                    </tr>
                </thead>
                <tbody>
                    <td class="d-flex flex-row justify-content-between" scope="col-sm">Seller Name</td>
                    <td scope="col-sm">Price</td>
                    <td scope="col-sm">Condition</td>
                    <div class="empty-row" style="background:#fff;width:100%;height:55px;">
                    </div>
                </tbody>
            </table>
        <% end %>
    </section>
</div>

