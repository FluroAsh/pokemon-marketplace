<div class="listing__container">

    <!-- form here -->
    <%= form_with model: @listing, local: true do |f| %>
        <% if @listing.errors.any? %>
            <div class="alert alert-error alert-dismissable fade show bg-danger">
                <h3><%= pluralize(@listing.errors.count, "error") %> Prohibited this listing from being created</h3>
                <ul>
                    <% @listing.errors.full_messages.each do |message| %>
                        <li><%= message %></li>
                    <% end %>
                </ul>
                <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
        <% end %>

        <section class="listing__details">
        <!-- info text-->
            <%= image_tag @card.small_image %>
            <h2><%= @card.name %>
            <h2>$ <%= @prices.avg7 %>

            <div class="form-group mb-3">
                <%= f.label :price, class: "form-label" %>
                <%= f.number_field :price, step: "0.01" %>
            </div>

            <!-- simple form version -->
            <!--<div class="form-group mb-3">
                <% # f.input :condition, as: :select, collection: @conditions.map { |k, v| [k, v] } %>
            </div>-->

             <div class="form-group mb-3">
                <%= f.label :condition, class: "form-label" %>
                <%= f.select :condition, @conditions.map { |k, v| [k, v] }, class: "form-select" %>
            </div>

            <div class="form group mb-3">
                <%= f.label :description, class: "form-label" %>
                <%= f.text_area :description, class: "w-100", style: "height:200px;" %>    
            </div>  
            
            <!-- card id that is passed to create action -->
            <%= f.hidden_field :card_id, :value => @card.id %>

            <div class="actions">
                <%= f.submit style: "width:100%;" %>
            </div>
        </section>
    <% end %>
</div>